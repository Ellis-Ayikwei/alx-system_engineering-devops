#!/bin/bash

# MySQL credentials
MYSQL_USER="root"
MYSQL_PASSWORD=<my ROOT_PASSWORD>

# MySQL user to be created
MYSQL_NEW_USER="holberton_user"
MYSQL_NEW_PASSWORD="projectcorrection280hbtn"
MYSQL_HOST="localhost"

# Grant permissions
GRANT_PERMISSIONS="REPLICATION CLIENT"

# Create MySQL user on web-01
ssh ubuntu@100.27.11.38 "mysql -u$MYSQL_USER -p$MYSQL_PASSWORD -e \"CREATE USER '$MYSQL_NEW_USER'@'$MYSQL_HOST' IDENTIFIED BY '$MYSQL_NEW_PASSWORD'; GRANT $GRANT_PERMISSIONS ON *.* TO '$MYSQL_NEW_USER'@'$MYSQL_HOST'; FLUSH PRIVILEGES;\""

# Create MySQL user on web-02
ssh ubuntu@107.23.156.4 "mysql -u$MYSQL_USER -p$MYSQL_PASSWORD -e \"CREATE USER '$MYSQL_NEW_USER'@'$MYSQL_HOST' IDENTIFIED BY '$MYSQL_NEW_PASSWORD'; GRANT $GRANT_PERMISSIONS ON *.* TO '$MYSQL_NEW_USER'@'$MYSQL_HOST'; FLUSH PRIVILEGES;\""